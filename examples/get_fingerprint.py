#!/usr/bin/env python3
from panda import Panda
from pprint import pprint

panda = Panda()
panda.set_safety_mode(Panda.SAFETY_NOOUTPUT)

fp = set()
cnt = 0
while True:
  cnt += 1
  msgs = panda.can_recv()
  for addr, ts, dat, bus in msgs:
    # read also msgs sent by EON on CAN bus 0x80 and filter out the
    # addr with more than 11 bits
    if bus < 4 and addr < 0x800:
      fp.add(f"{bus}:{str(addr).rjust(4)}[{len(dat)}]")

  if cnt % 1000 == 0:
    print("")
    for s in sorted(fp): print(s)

# from obd port:
# 0:  57[3]
# 0: 148[8]
# 0: 199[4]
# 0: 231[5]
# 0: 304[8]
# 0: 330[8]
# 0: 344[8]
# 0: 380[8]
# 0: 401[8]
# 0: 420[8]
# 0: 423[2]
# 0: 427[3]
# 0: 428[8]
# 0: 432[7]
# 0: 450[8]
# 0: 464[8]
# 0: 469[3]
# 0: 470[2]
# 0: 474[8]
# 0: 476[7]
# 0: 479[8]
# 0: 493[5]
# 0: 495[8]
# 0: 507[1]
# 0: 545[6]
# 0: 597[8]
# 0: 661[4]
# 0: 662[4]
# 0: 773[7]
# 0: 777[8]
# 0: 780[8]
# 0: 795[8]
# 0: 800[8]
# 0: 804[8]
# 0: 806[8]
# 0: 808[8]
# 0: 814[4]
# 0: 815[8]
# 0: 817[4]
# 0: 825[4]
# 0: 829[5]
# 0: 862[8]
# 0: 881[8]
# 0: 882[4]
# 0: 884[8]
# 0: 888[8]
# 0: 891[8]
# 0: 918[7]
# 0: 927[8]
# 0: 929[8]
# 0: 983[8]
# 0:1027[5]
# 0:1029[8]
# 0:1036[8]
# 0:1039[8]
# 0:1064[7]
# 0:1092[1]
# 0:1108[8]
# 0:1115[2]
# 0:1125[8]
# 0:1127[2]
# 0:1296[8]
# 0:1302[8]

# from camera harness:
# 0: 228[5]
# 0: 229[8]
# 0: 513[8]
# 0: 576[8]
# 0: 577[8]
# 0: 579[8]
# 0: 580[8]
# 0: 582[8]
# 0: 583[8]
# 0: 585[8]
# 0: 586[8]
# 0: 640[8]
# 0: 641[8]
# 0: 642[8]
# 0: 643[8]
# 0: 644[8]
# 0: 645[8]
# 0: 646[8]
# 0: 647[8]
# 0: 648[8]
# 0: 649[8]
# 0: 650[8]
# 0: 651[8]
# 0: 652[8]
# 0: 653[8]
# 0: 654[8]
# 0: 655[8]
# 0: 656[8]
# 0: 657[8]
# 0: 658[8]
# 0: 659[8]
# 0: 660[8]
# 0: 661[8]
# 0: 662[8]
# 0: 663[8]
# 0: 712[8]
# 0: 713[8]
# 0: 714[8]
# 0: 715[8]
# 0: 716[8]
# 0: 717[8]
# 0: 718[8]
# 0: 719[8]
# 0: 720[8]
# 0: 721[8]
# 0: 722[8]
# 0: 723[8]
# 0: 724[8]
# 0: 725[8]
# 0: 726[8]
# 0: 727[8]
# 0: 728[8]
# 0: 729[8]
# 0: 730[8]
# 0: 731[8]
# 0: 732[8]
# 0: 733[8]
# 0: 734[8]
# 0: 735[8]
# 0: 736[8]
# 0: 737[8]
# 0: 738[8]
# 0: 739[8]
# 0: 740[8]
# 0: 741[8]
# 0: 742[8]
# 0: 743[8]
# 0: 744[8]
# 0: 745[8]
# 0: 746[8]
# 0: 747[8]
# 0: 748[8]
# 0: 749[8]
# 0: 750[8]
# 0: 751[8]
# 0: 752[8]
# 0: 753[8]
# 0: 754[8]
# 0: 755[8]
# 0: 756[8]
# 0: 757[8]
# 0: 758[8]
# 0: 759[8]
# 0: 760[8]
# 0: 761[8]
# 0: 762[8]
# 0: 763[8]
# 0: 764[8]
# 0: 765[8]
# 0: 766[8]
# 0: 767[8]
# 0: 829[5]
# 0:1024[4]
# 0:1040[6]
# 0:1056[8]
# 0:1088[3]
# 0:1104[8]
# 0:1641[8]
# 0:1872[8]
# 1:  57[3]
# 1: 148[8]
# 1: 228[5]
# 1: 232[7]
# 1: 304[8]
# 1: 330[8]
# 1: 340[8]
# 1: 344[8]
# 1: 380[8]
# 1: 399[7]
# 1: 401[8]
# 1: 420[8]
# 1: 427[3]
# 1: 432[7]
# 1: 441[5]
# 1: 446[3]
# 1: 450[8]
# 1: 464[8]
# 1: 474[8]
# 1: 477[8]
# 1: 479[8]
# 1: 490[8]
# 1: 495[8]
# 1: 545[6]
# 1: 597[8]
# 1: 662[4]
# 1: 773[7]
# 1: 777[8]
# 1: 780[8]
# 1: 800[8]
# 1: 804[8]
# 1: 806[8]
# 1: 808[8]
# 1: 814[4]
# 1: 829[5]
# 1: 862[8]
# 1: 884[8]
# 1: 891[8]
# 1: 927[8]
# 1: 929[8]
# 1: 985[3]
# 1:1024[5]
# 1:1027[5]
# 1:1029[8]
# 1:1036[8]
# 1:1039[8]
# 1:1108[8]
# 1:1302[8]
# 1:1322[5]
# 1:1361[5]
# 1:1365[5]
# 1:1424[5]
# 1:1600[5]
# 1:1601[8]
# 1:1618[5]
# 1:1633[8]
# 1:1670[5]
# 2: 228[5]
# 2: 229[8]
# 2: 513[8]
# 2: 576[8]
# 2: 577[8]
# 2: 579[8]
# 2: 580[8]
# 2: 582[8]
# 2: 583[8]
# 2: 585[8]
# 2: 586[8]
# 2: 640[8]
# 2: 641[8]
# 2: 642[8]
# 2: 643[8]
# 2: 644[8]
# 2: 645[8]
# 2: 646[8]
# 2: 647[8]
# 2: 648[8]
# 2: 649[8]
# 2: 650[8]
# 2: 651[8]
# 2: 652[8]
# 2: 653[8]
# 2: 654[8]
# 2: 655[8]
# 2: 656[8]
# 2: 657[8]
# 2: 658[8]
# 2: 659[8]
# 2: 660[8]
# 2: 661[8]
# 2: 662[8]
# 2: 663[8]
# 2: 712[8]
# 2: 713[8]
# 2: 714[8]
# 2: 715[8]
# 2: 716[8]
# 2: 717[8]
# 2: 718[8]
# 2: 719[8]
# 2: 720[8]
# 2: 721[8]
# 2: 722[8]
# 2: 723[8]
# 2: 724[8]
# 2: 725[8]
# 2: 726[8]
# 2: 727[8]
# 2: 728[8]
# 2: 729[8]
# 2: 730[8]
# 2: 731[8]
# 2: 732[8]
# 2: 733[8]
# 2: 734[8]
# 2: 735[8]
# 2: 736[8]
# 2: 737[8]
# 2: 738[8]
# 2: 739[8]
# 2: 740[8]
# 2: 741[8]
# 2: 742[8]
# 2: 743[8]
# 2: 744[8]
# 2: 745[8]
# 2: 746[8]
# 2: 747[8]
# 2: 748[8]
# 2: 749[8]
# 2: 750[8]
# 2: 751[8]
# 2: 752[8]
# 2: 753[8]
# 2: 754[8]
# 2: 755[8]
# 2: 756[8]
# 2: 757[8]
# 2: 758[8]
# 2: 759[8]
# 2: 760[8]
# 2: 761[8]
# 2: 762[8]
# 2: 763[8]
# 2: 764[8]
# 2: 765[8]
# 2: 766[8]
# 2: 767[8]
# 2: 829[5]
# 2:1024[4]
# 2:1040[6]
# 2:1056[8]
# 2:1088[3]
# 2:1104[8]
# 2:1641[8]
# 2:1872[8]
